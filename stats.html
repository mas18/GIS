<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistiques</title>

    <!-- Bootstrap + Font Awesome + Main CSS -->
    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="data/css/bootstrap.css" rel="stylesheet">
    <!-- customize this file if needed -->
    <link href="data/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="data/css/stats.css"/>
    <link rel="stylesheet" href="data/css/zoneInfo.css"/>
    <script src="data/js/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="data/js/jribbble.js"></script>
    <script src="data/js/bootstrap.js"></script>
</head>
<body>

<div class="wrapper">
    <div class="container">
        <header>
            <div class="row">
                <div class="navbar">
                    <div class="navbar-header">
                        <button class="navbar-toggle collapsed" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="index.html">Foot Stat</a>
                    </div>

                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav">
                            <li>
                                <a href="index.html">Clubs</a>
                            </li>

                            <li>
                                <a href="players.html">Joueurs</a>
                            </li>

                            <li>
                                <a href="stats.html">Statistiques</a>
                            </li>
                        </ul>

                        <ul class="nav navbar-nav social">
                            <li><a href="#"> <i class="fa fa-facebook"></i> </a></li>
                            <li><a href="#"> <i class="fa fa-twitter"></i> </a></li>
                            <li><a href="#"> <i class="fa fa-github"></i> </a> </li>
                            <li><a href="#"> <i class="fa fa-linkedin"></i> </a></li>
                            <li><a href="#"> <i class="fa fa-envelope"></i> </a></li>
                        </ul>
                    </div><!-- /.nav-collapse -->
                </div><!-- /.navbar -->
            </div>

            <div class="row container-fluid mainContent">
                <div class="col-md-12 col-lg-12">
                    <button class="button activated" id="all">Toutes les statistiques</button>
                    <button class="button" id="a">Âge des clubs</button>
                    <button class="button" id="b">Capacité des stades</button>
                    <button class="button" id="c">Âge des joueurs</button>
                    <button class="button" id="d">Taille des joueurs</button>
                    <button class="button" id="e">Poids des joueurs</button>
                    <button class="button" id="f">Nombre de joueurs</button>

                    <!-- An element with an id is needed for the jQuery -->
                    <div class="container-fluid" id="parent">
                        <!-- The base class is the graph. Categories are then given as accessory classes. Any div can be in more than one category -->
                        <div class="graph a">
                            <div class="title">Âge des clubs</div>
                            <canvas id="oldestClub" width="600" height="400"></canvas>
                            <canvas id="youngestClub" width="600" height="400"></canvas>
                            <canvas id="averageClub" width="600" height="400"></canvas>
                        </div>
                        <div class="graph b">
                            <div class="title">Capacité des stades</div>
                            <canvas id="highestCapacity" width="600" height="400"></canvas>
                            <canvas id="lowestCapacity" width="600" height="400"></canvas>
                            <canvas id="averageCapacity" width="600" height="400"></canvas>
                        </div>
                        <div class="graph c">
                            <div class="title">Âge des joueurs</div>
                            <canvas id="oldestPlayer" width="600" height="400"></canvas>
                            <canvas id="youngestPlayer" width="600" height="400"></canvas>
                            <canvas id="averagePlayer" width="600" height="400"></canvas>
                        </div>
                        <div class="graph d">
                            <div class="title">Taille des joueurs</div>
                            <canvas id="tallestPlayer" width="600" height="400"></canvas>
                            <canvas id="smallestPlayer" width="600" height="400"></canvas>
                            <canvas id="averageSizePlayer" width="600" height="400"></canvas>
                        </div>
                        <div class="graph e">
                            <div class="title">Poids des joueurs</div>
                            <canvas id="heaviestPlayer" width="600" height="400"></canvas>
                            <canvas id="lightestPlayer" width="600" height="400"></canvas>
                            <canvas id="averageWeightPlayer" width="600" height="400"></canvas>
                        </div>
                        <div class="graph f">
                            <div class="title">Nombre de joueurs</div>
                            <canvas id="nbPlayer" width="600" height="400"></canvas>
                            <canvas id="nbLocalPlayer" width="600" height="400"></canvas>
                            <canvas id="nbForeignPlayer" width="600" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="row grid-list-wrapper no-gutter-space" id="shots"></div>
    </div>
</div>

<footer>
    <div class="container">
        <nav class="nav-footer">
            <ul>
                <li>
                    <a href="#">About</a>
                </li>

                <li>
                    <a href="#">Blog</a>
                </li>

                <li>
                    <a href="#">Resume</a>
                </li>

                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>

            <ul>
                <li><a href="#"> <i class="fa fa-facebook"></i> </a></li>
                <li><a href="#"> <i class="fa fa-twitter"></i> </a></li>
                <li><a href="#"> <i class="fa fa-github"></i> </a> </li>
                <li><a href="#"> <i class="fa fa-linkedin"></i> </a></li>
                <li><a href="#"> <i class="fa fa-envelope"></i> </a></li>
            </ul>

            <p class="credits text-center">&copy; All Rights Reserved 2015</p>
        </nav>
    </div>

</footer>

<script>

    // DISPLAY DIV
    // This display different div when clicking on each button to filter the stat
    var $btns = $('.button').click(function() {
        if (this.id == 'all') {
            $('#parent > div').fadeIn(450);
        } else {
            var $el = $('.' + this.id).fadeIn(450);
            $('#parent > div').not($el).hide();
        }
        $btns.removeClass('activated');
        $(this).addClass('activated');
    })

    // CLUB AGE -------------------------------------------------------------------------------------
    // This get function does the stat for the age of the club
    $.get('data/geojson/stade-complete.geojson', function(data) {

        var oldestClub = document.getElementById("oldestClub");
        var youngestClub = document.getElementById("youngestClub");
        var averageClub = document.getElementById("averageClub");

        var options1 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Club le plus ancien' },
            legend: { display: true, position: 'bottom' }
        };

        var options2 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Club le plus récent' },
            legend: { display: true, position: 'bottom' }
        };

        var options3 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Âge moyen des clubs' },
            legend: { display: true, position: 'bottom' }
        };

        var oldestValues = [10000, 10000, 10000, 10000, 10000, 10000], youngestValues = [-10000, -10000, -10000, -10000, -10000, -10000];
        var oldestClubs = ["", "", "", "", "", ""], youngestClubs = ["", "", "", "", "", ""];
        var englandAverage = new Array(), franceAverage = new Array(), spainAverage = new Array(), italyAverage = new Array(), germanyAverage = new Array(), switzerlandAverage = new Array();

        $.each(data.features, function (key, val) {
            switch(val.properties.Country) {
                case "England":
                    getStatistics(englandAverage, "Angleterre - ", 0, val);
                    break;
                case "Spain":
                    getStatistics(spainAverage, "Espagne - ", 2, val);
                    break;
                case "Germany":
                    getStatistics(germanyAverage, "Allemagne - ", 4, val);
                    break;
                case "Italy":
                    getStatistics(italyAverage, "Italie - ", 3, val);
                    break;
                case "France":
                    getStatistics(franceAverage, "France - ", 1, val);
                    break;
                case "Switzerland":
                    getStatistics(switzerlandAverage, "Suisse - ", 5, val);
                    break;
                default:
            }
        });

        oldestValues = [getAge(oldestValues[0]), getAge(oldestValues[1]), getAge(oldestValues[2]), getAge(oldestValues[3]), getAge(oldestValues[4]), getAge(oldestValues[5])];
        youngestValues = [getAge(youngestValues[0]), getAge(youngestValues[1]), getAge(youngestValues[2]), getAge(youngestValues[3]), getAge(youngestValues[4]), getAge(youngestValues[5])];
        averageValues = [getAverage(englandAverage), getAverage(franceAverage), getAverage(spainAverage), getAverage(italyAverage), getAverage(germanyAverage), getAverage(switzerlandAverage)];

        // This function get the age from a year
        function getAge(year) {
            var date = new Date().getFullYear();
            return date - year;
        }

        // This function calculates the average of a list of values
        function getAverage(average) {
            var sum = 0;
            for(var i = 0; i < average.length; i++) {
                sum += parseInt(average[i], 10);
            }
            return getAge(Math.round(sum/average.length));
        }

        // This function calculates the min and max values
        function getStatistics(average, country, position, value) {
            average.push(value.properties.Formed);
            if(value.properties.Formed < oldestValues[position]) {
                oldestValues[position] = value.properties.Formed;
                oldestClubs[position] = country + value.properties.Club_Name;
            }
            if(value.properties.Formed > youngestValues[position]) {
                youngestValues[position] = value.properties.Formed;
                youngestClubs[position] = country + value.properties.Club_Name;
            }
        }

        var oldestClubChart = {
            datasets: [{
                data: oldestValues,
                backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                hoverBackgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ]
            }],
            labels: oldestClubs
        };

        new Chart(oldestClub, {
            data: oldestClubChart,
            type: 'doughnut',
            options: options1
        });

        var youngestClubChart = {
            datasets: [{
                data: youngestValues,
                backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                hoverBackgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ]
            }],
            labels: youngestClubs
        };

        new Chart(youngestClub, {
            data: youngestClubChart,
            type: 'doughnut',
            options: options2
        });

        var averageClubChart = {
            labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
            datasets: [
                {
                    data: averageValues,
                    backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                    hoverBackgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ]
                }]
        };

        new Chart(averageClub,{
            type: 'doughnut',
            data: averageClubChart,
            options: options3
        });

    });

    // STADIUM CAPACITY -------------------------------------------------------------------------------------
    // This get function does the stat for the stadium capacity
    $.get('data/geojson/stade-complete.geojson', function(data) {

        var highestCapacity = document.getElementById("highestCapacity");
        var lowestCapacity = document.getElementById("lowestCapacity");
        var averageCapacity = document.getElementById("averageCapacity");

        var options1 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Stade le plus grand' },
            legend: { display: true, position: 'bottom' }
        };

        var options2 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Stade le plus petit' },
            legend: { display: true, position: 'bottom' }
        };

        var options3 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Taille moyenne des stades' },
            legend: { display: true, position: 'bottom' }
        };

        var lowestValues = [100000, 100000, 100000, 100000, 100000, 100000], highestValues = [-10000, -10000, -10000, -10000, -10000, -10000];
        var lowestStadium = ["", "", "", "", "", ""], highestStadium = ["", "", "", "", "", ""];
        var englandAverage = new Array(), franceAverage = new Array(), spainAverage = new Array(), italyAverage = new Array(), germanyAverage = new Array(), switzerlandAverage = new Array();

        $.each(data.features, function (key, val) {
            switch(val.properties.Country) {
                case "England":
                    getStatistics(englandAverage, "Angleterre - ", 0, val);
                    break;
                case "Spain":
                    getStatistics(spainAverage, "Espagne - ", 2, val);
                    break;
                case "Germany":
                    getStatistics(germanyAverage, "Allemagne - ", 4, val);
                    break;
                case "Italy":
                    getStatistics(italyAverage, "Italie - ", 3, val);
                    break;
                case "France":
                    getStatistics(franceAverage, "France - ", 1, val);
                    break;
                case "Switzerland":
                    getStatistics(switzerlandAverage, "Suisse - ", 5, val);
                    break;
                default:
            }
        });

        averageValues = [getAverage(englandAverage), getAverage(franceAverage), getAverage(spainAverage), getAverage(italyAverage), getAverage(germanyAverage), getAverage(switzerlandAverage)];

        // This function calculates the average of a list of values
        function getAverage(average) {
            var sum = 0;
            for(var i = 0; i < average.length; i++) {
                sum += parseInt(average[i], 10);
            }
            return Math.round(sum/average.length);
        }

        // This function calculates the min and max values
        function getStatistics(average, country, position, value) {
            average.push(value.properties.Capacity);
            if(value.properties.Capacity > highestValues[position]) {
                highestValues[position] = value.properties.Capacity;
                highestStadium[position] = country + value.properties.Club_Name;
            }
            if(value.properties.Capacity < lowestValues[position]) {
                lowestValues[position] = value.properties.Capacity;
                lowestStadium[position] = country + value.properties.Club_Name;
            }
        }

        var highestCapacityChart = {
            datasets: [{
                data: highestValues,
                backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                label: 'Stade le plus grand'
            }],
            labels: highestStadium
        };

        new Chart(highestCapacity, {
            data: highestCapacityChart,
            type: 'polarArea',
            options: options1
        });

        var lowestCapacityChart = {
            datasets: [{
                data: lowestValues,
                backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                label: 'Stade le plus petit'
            }],
            labels: lowestStadium
        };

        new Chart(lowestCapacity, {
            data: lowestCapacityChart,
            type: 'polarArea',
            options: options2
        });

        var averageCapacityChart = {
            datasets: [{
                data: averageValues,
                backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                label: 'Moyenne capacité des stades'
            }],
            labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"]
        };

        new Chart(averageCapacity, {
            data: averageCapacityChart,
            type: 'polarArea',
            options: options3
        });
    });

    // PLAYERS AGE -------------------------------------------------------------------------------------
    // This get function does the stat for the age of the player
    $.get('data/geojson/players-complete.geojson', function(data) {

        var oldestPlayer = document.getElementById("oldestPlayer");
        var youngestPlayer = document.getElementById("youngestPlayer");
        var averagePlayer = document.getElementById("averagePlayer");

        var options1 = {
            animation: { duration:1500 },
            animation:false,
            responsive:false,
            maintainAspectRatio: false,
            legend: {
                display: false
            },
            title: { display: true, fontsize: 14, text: 'Joueur le plus âgé' },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var options2 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueur le plus jeune' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var options3 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            legend: {
                display: false
            },
            title: { display: true, fontsize: 14, text: 'Âge moyen des joueurs' },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var youngestValues = [10000, 10000, 10000, 10000, 10000, 10000], oldestValues = [-10000, -10000, -10000, -10000, -10000, -10000];
        var oldestPlayers = ["", "", "", "", "", ""], youngestPlayers = ["", "", "", "", "", ""];
        var englandAverage = new Array(), franceAverage = new Array(), spainAverage = new Array(), italyAverage = new Array(), germanyAverage = new Array(), switzerlandAverage = new Array();

        $.each(data.features, function (key, val) {
            switch(val.properties.Country) {
                case "England":
                    getStatistics(englandAverage, "Angleterre - ", 0, val);
                    break;
                case "Spain":
                    getStatistics(spainAverage, "Espagne - ", 2, val);
                    break;
                case "Germany":
                    getStatistics(germanyAverage, "Allemagne - ", 4, val);
                    break;
                case "Italy":
                    getStatistics(italyAverage, "Italie - ", 3, val);
                    break;
                case "France":
                    getStatistics(franceAverage, "France - ", 1, val);
                    break;
                case "Switzerland":
                    getStatistics(switzerlandAverage, "Suisse - ", 5, val);
                    break;
                default:
            }
        });

        averageValues = [getAverage(englandAverage), getAverage(franceAverage), getAverage(spainAverage), getAverage(italyAverage), getAverage(germanyAverage), getAverage(switzerlandAverage)];

        // This function get the age from a date of birth
        function getAge(dateString)
        {
            // converting the date
            var year = "00";
            if(dateString.substring(6, 8) < 50)
                year = "20";
            else
                year = "19";
            var newDate = year + dateString.substring(6, 8) + "-" + dateString.substring(3, 5) + "-" + dateString.substring(0, 2);

            // get the age from the converted date
            var today = new Date();
            var birthDate = new Date(newDate);
            var age = today.getFullYear() - birthDate.getFullYear();
            var m = today.getMonth() - birthDate.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate()))
            {
                age--;
            }
            return age;
        }

        // This function calculates the average of a list of values
        function getAverage(average) {
            var sum = 0;
            for(var i = 0; i < average.length; i++) {
                sum += parseInt(average[i], 10);
            }
            return Math.round(sum/average.length * 100) / 100;
        }

        // This function calculates the min and max values
        function getStatistics(average, country, position, value) {
            average.push(getAge(value.properties.Date_of_Birth));
            if(getAge(value.properties.Date_of_Birth) > oldestValues[position]) {
                oldestValues[position] = getAge(value.properties.Date_of_Birth);
                oldestPlayers[position] = country + value.properties.Name;
            }
            if(getAge(value.properties.Date_of_Birth) < youngestValues[position]) {
                youngestValues[position] = getAge(value.properties.Date_of_Birth);
                youngestPlayers[position] = country + value.properties.Name;
            }
        }

        var oldestPlayerChart = new Chart(oldestPlayer, {
            type: 'horizontalBar',
            data: {
                labels: oldestPlayers,
                datasets: [{
                    label: 'Joueur le plus âgé',
                    data: oldestValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options1
        });

        var youngestPlayerChart = new Chart(youngestPlayer, {
            type: 'horizontalBar',
            data: {
                labels: youngestPlayers,
                datasets: [{
                    label: 'Joueur le plus jeune',
                    data: youngestValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options2
        });

        var averagePlayerChart = new Chart(averagePlayer, {
            type: 'horizontalBar',
            data: {
                labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
                datasets: [{
                    label: 'Age moyen des joueurs',
                    data: averageValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options3
        });
    });

    // PLAYERS HEIGHT -------------------------------------------------------------------------------------
    // This get function does the stat for the size of the player
    $.get('data/geojson/players-complete.geojson', function(data) {

        var tallestPlayer = document.getElementById("tallestPlayer");
        var smallestPlayer = document.getElementById("smallestPlayer");
        var averageSizePlayer = document.getElementById("averageSizePlayer");

        var options1 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueur le plus grand' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var options2 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueur le plus petit' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var options3 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Taille moyenne des joueurs' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var smallestValues = [100000, 100000, 100000, 100000, 100000, 100000], tallestValues = [-10000, -10000, -10000, -10000, -10000, -10000];
        var smallestPlayers = ["", "", "", "", "", ""], tallestPlayers = ["", "", "", "", "", ""];
        var englandAverage = new Array(), franceAverage = new Array(), spainAverage = new Array(), italyAverage = new Array(), germanyAverage = new Array(), switzerlandAverage = new Array();

        $.each(data.features, function (key, val) {
            switch(val.properties.Country) {
                case "England":
                    getStatistics(englandAverage, "Angleterre - ", 0, val);
                    break;
                case "Spain":
                    getStatistics(spainAverage, "Espagne - ", 2, val);
                    break;
                case "Germany":
                    getStatistics(germanyAverage, "Allemagne - ", 4, val);
                    break;
                case "Italy":
                    getStatistics(italyAverage, "Italie - ", 3, val);
                    break;
                case "France":
                    getStatistics(franceAverage, "France - ", 1, val);
                    break;
                case "Switzerland":
                    getStatistics(switzerlandAverage, "Suisse - ", 5, val);
                    break;
                default:
            }
        });

        averageValues = [getAverage(englandAverage), getAverage(franceAverage), getAverage(spainAverage), getAverage(italyAverage), getAverage(germanyAverage), getAverage(switzerlandAverage)];

        // This function calculates the average of a list of values
        function getAverage(average) {
            var sum = 0;
            for(var i = 0; i < average.length; i++) {
                sum += average[i], 10;
            }
            return Math.round(sum/average.length * 100) / 100;
        }

        // This function calculates the min and max values
        function getStatistics(average, country, position, value) {
            if(value.properties.Height != null) {
                average.push(value.properties.Height);
                if(value.properties.Height > tallestValues[position]) {
                    tallestValues[position] = value.properties.Height;
                    tallestPlayers[position] = country + value.properties.Name;
                }
                if(value.properties.Height < smallestValues[position]) {
                    smallestValues[position] = value.properties.Height;
                    smallestPlayers[position] = country + value.properties.Name;
                }
            }
        }

        var tallestPlayerChart = new Chart(tallestPlayer, {
            type: 'horizontalBar',
            data: {
                labels: tallestPlayers,
                datasets: [{
                    label: 'Joueur le plus grand',
                    data: tallestValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options1
        });

        var smallestPlayerChart = new Chart(smallestPlayer, {
            type: 'horizontalBar',
            data: {
                labels: smallestPlayers,
                datasets: [{
                    label: 'Joueur le plus petit',
                    data: smallestValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options2
        });

        var averageSizePlayerChart = new Chart(averageSizePlayer, {
            type: 'horizontalBar',
            data: {
                labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
                datasets: [{
                    label: 'Taille moyenne des joueurs',
                    data: averageValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options3
        });
    });

    // PLAYERS WEIGHT -------------------------------------------------------------------------------------
    // This get function does the stat for the weight of the player
    $.get('data/geojson/players-complete.geojson', function(data) {

        var heaviestPlayer = document.getElementById("heaviestPlayer");
        var lightestPlayer = document.getElementById("lightestPlayer");
        var averageWeightPlayer = document.getElementById("averageWeightPlayer");

        var options1 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueur le plus lourd' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var options2 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueur le plus léger' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var options3 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Poids moyen des joueurs' },
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        };

        var lightestValues = [100000, 100000, 100000, 100000, 100000, 100000], heaviestValues = [-10000, -10000, -10000, -10000, -10000, -10000];
        var lightestPlayers = ["", "", "", "", "", ""], heaviestPlayers = ["", "", "", "", "", ""];
        var englandAverage = new Array(), franceAverage = new Array(), spainAverage = new Array(), italyAverage = new Array(), germanyAverage = new Array(), switzerlandAverage = new Array();

        $.each(data.features, function (key, val) {
            switch(val.properties.Country) {
                case "England":
                    getStatistics(englandAverage, "Angleterre - ", 0, val);
                    break;
                case "Spain":
                    getStatistics(spainAverage, "Espagne - ", 2, val);
                    break;
                case "Germany":
                    getStatistics(germanyAverage, "Allemagne - ", 4, val);
                    break;
                case "Italy":
                    getStatistics(italyAverage, "Italie - ", 3, val);
                    break;
                case "France":
                    getStatistics(franceAverage, "France - ", 1, val);
                    break;
                case "Switzerland":
                    getStatistics(switzerlandAverage, "Suisse - ", 5, val);
                    break;
                default:
            }
        });

        averageValues = [getAverage(englandAverage), getAverage(franceAverage), getAverage(spainAverage), getAverage(italyAverage), getAverage(germanyAverage), getAverage(switzerlandAverage)];

        // This function calculates the average of a list of values
        function getAverage(average) {
            var sum = 0;
            for(var i = 0; i < average.length; i++) {
                sum += average[i], 10;
            }
            return Math.round(sum/average.length);
        }

        // This function calculates the min and max values
        function getStatistics(average, country, position, value) {
            if(value.properties.Weight != null) {
                average.push(value.properties.Weight);
                if(value.properties.Weight > heaviestValues[position]) {
                    heaviestValues[position] = value.properties.Weight;
                    heaviestPlayers[position] = country + value.properties.Name;
                }
                if(value.properties.Weight < lightestValues[position]) {
                    lightestValues[position] = value.properties.Weight;
                    lightestPlayers[position] = country + value.properties.Name;
                }
            }
        }

        var heaviestPlayerChart = new Chart(heaviestPlayer, {
            type: 'horizontalBar',
            data: {
                labels: heaviestPlayers,
                datasets: [{
                    label: 'Joueur le plus lourd',
                    data: heaviestValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options1
        });

        var lightestPlayerChart = new Chart(lightestPlayer, {
            type: 'horizontalBar',
            data: {
                labels: lightestPlayers,
                datasets: [{
                    label: 'Joueur le plus léger',
                    data: lightestValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options2
        });

        var averageWeightPlayerChart = new Chart(averageWeightPlayer, {
            type: 'horizontalBar',
            data: {
                labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
                datasets: [{
                    label: 'Poids moyen des joueurs',
                    data: averageValues,
                    backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ],
                    borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ],
                    borderWidth: 1
                }]
            },
            options: options3
        });
    });

    // PLAYERS PER CHAMPIONSHIP -------------------------------------------------------------------------------------
    // This get function does the stat for the player per championship
    $.get('data/geojson/players-complete.geojson', function(data) {

        var nbPlayer = document.getElementById("nbPlayer");
        var nbLocalPlayer = document.getElementById("nbLocalPlayer");
        var nbForeignPlayer = document.getElementById("nbForeignPlayer");

        var options1 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Nombre total de joueurs' },
            legend: { display: true, position: 'bottom' }
        };

        var options2 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueurs locaux' },
            legend: { display: true, position: 'bottom' }
        };

        var options3 = {
            animation: { duration:1500 },
            responsive:false,
            maintainAspectRatio: false,
            title: { display: true, fontsize: 14, text: 'Joueurs étrangers' },
            legend: { display: true, position: 'bottom' }
        };

        var averageValues = [0, 0, 0, 0, 0, 0], localValues = [0, 0, 0, 0, 0, 0], foreignValues = [0, 0, 0, 0, 0, 0];

        $.each(data.features, function (key, val) {
            switch(val.properties.Country) {
                case "England":
                    averageValues[0]++;
                    if(val.properties.Nat == "Angleterre")
                        localValues[0]++;
                    else
                        foreignValues[0]++;
                    break;
                case "Spain":
                    averageValues[2]++;
                    if(val.properties.Nat == "Espagne")
                        localValues[2]++;
                    else
                        foreignValues[2]++;
                    break;
                case "Germany":
                    averageValues[4]++;
                    if(val.properties.Nat == "Allemagne")
                        localValues[4]++;
                    else
                        foreignValues[4]++;
                    break;
                case "Italy":
                    averageValues[3]++;
                    if(val.properties.Nat == "Italie")
                        localValues[3]++;
                    else
                        foreignValues[3]++;
                    break;
                case "France":
                    averageValues[1]++;
                    if(val.properties.Nat == "France")
                        localValues[1]++;
                    else
                        foreignValues[1]++;
                    break;
                case "Switzerland":
                    averageValues[5]++;
                    if(val.properties.Nat == "Suisse")
                        localValues[5]++;
                    else
                        foreignValues[5]++;
                    break;
                default:
            }
        });

        var nbPlayerChart = {
            labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
            datasets: [
                {
                    data: averageValues,
                    backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                    hoverBackgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ]
                }]
        };

        new Chart(nbPlayer,{
            type: 'pie',
            data: nbPlayerChart,
            options: options1
        });

        var nbLocalPlayerChart = {
            labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
            datasets: [
                {
                    data: localValues,
                    backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                    hoverBackgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ]
                }]
        };

        new Chart(nbLocalPlayer,{
            type: 'pie',
            data: nbLocalPlayerChart,
            options: options2
        });

        var nbForeignPlayerChart = {
            labels: ["Angleterre", "France", "Espagne", "Italie", "Allemagne", "Suisse"],
            datasets: [
                {
                    data: foreignValues,
                    backgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ],
                    hoverBackgroundColor: [ "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0", "#cf75ed", "#eba45d" ]
                }]
        };

        new Chart(nbForeignPlayer,{
            type: 'pie',
            data: nbForeignPlayerChart,
            options: options3
        });
    });

</script>
</body>
</html>